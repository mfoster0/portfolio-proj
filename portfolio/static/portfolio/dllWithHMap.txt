class urlNode():
    def __init__(self,url):
        self.url = url
        self.next = None
        self.prev = None
        
class dllist():
    def __init__(self):
        self.head = None
        self.hMap = {}

    def addURL2(self, url):
        if self.head:
            if self.head.url == url:
                return #nothing to update
            
        if url not in self.hMap:
            node = urlNode(url)
            self.hMap[url] = node
                
            if not self.head:
                self.head = node
                return
            
            self.head.prev = node
            node.next = self.head
            self.head = node
            return
        
        node = self.hMap[url]
        node.prev.next = node.next
        if node.next:
            node.next.prev = node.prev
            
        node.next = self.head
        self.head.prev = node
        node.prev = None
        self.head = node
        
    def addURL(self, url):
        if self.head:
            if self.head.url == url:
                return #nothing to update
            
        if url not in self.hMap:
            node = urlNode(url)
            self.hMap[url] = node
                
            if not self.head:
                self.head = self.hMap[url]
                return
            
            self.head.prev = self.hMap[url]
            self.hMap[url].next = self.head
            self.head = self.hMap[url]
            return
        
        
        self.hMap[url].prev.next = self.hMap[url].next
        if self.hMap[url].next:
            self.hMap[url].next.prev = self.hMap[url].prev
            
        self.hMap[url].next = self.head
        self.head.prev = self.hMap[url]
        self.hMap[url].prev = None
        self.head = self.hMap[url]
        
    def printHistory(self):
        
        node = self.head
        
        while node:
            print(node.url)
            node = node.next
            
bHist = dllist()

bHist.addURL("aa")
bHist.addURL("aa")
bHist.addURL("bb")
bHist.addURL("cc")
bHist.addURL("bb")

bHist.printHistory()